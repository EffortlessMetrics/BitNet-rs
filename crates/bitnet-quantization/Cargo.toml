[package]
name = "bitnet-quantization"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
authors.workspace = true
keywords.workspace = true
categories.workspace = true
description = "Quantization algorithms for BitNet models"
include = [
  "src/**",
  "Cargo.toml",
]

[dependencies]
bitnet-common = { path = "../bitnet-common", version = "0.2.1-dev" }
anyhow.workspace = true
thiserror.workspace = true
bytemuck.workspace = true
candle-core.workspace = true
rayon.workspace = true
serde.workspace = true
tracing.workspace = true
bitnet-kernels = { path = "../bitnet-kernels", version = "0.2.1-dev", optional = true }

[dev-dependencies]
proptest.workspace = true
criterion.workspace = true
tempfile.workspace = true
serial_test = "3.1"
rand.workspace = true
rand_chacha = "0.9"
insta = { workspace = true, features = ["json"] }
bitnet-models = { path = "../bitnet-models", version = "0.2.1-dev", features = ["cpu"] }  # AC2: For testing re-exports

[features]
default = []
cpu = ["bitnet-kernels/cpu"]
simd = []
integration-tests = []
cuda = ["bitnet-kernels/cuda"]
rocm = ["bitnet-kernels/rocm"]
gpu = ["cuda", "rocm"]  # GPU umbrella â€” CUDA and ROCm implementations
oneapi = ["bitnet-common/oneapi", "bitnet-kernels/oneapi"]
inference = []

[[bench]]
name = "quantization"
harness = false

[[bench]]
name = "i2s_dequant"
harness = false
