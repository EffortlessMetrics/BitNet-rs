[package]
name = "bitnet-sys"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
documentation.workspace = true
authors.workspace = true
keywords.workspace = true
categories.workspace = true
description = "Low-level FFI bindings to BitNet C++ implementation for cross-validation"
readme = "README.md"
rust-version.workspace = true

[features]
default = []
ffi = ["dep:bindgen", "dep:cc"]  # Enable native/C++ build only when requested
crossval = ["ffi"]  # Keep backward compatibility
symbol-analysis = []  # Build-time symbol inspection of found C++ libraries â†’ emits cfg flags

[dependencies]
# Only include FFI dependencies when the ffi feature is enabled
bindgen = { version = "0.72.1", optional = true }
cc = { version = "1.2.41", optional = true }
thiserror = "2.0.17"

[build-dependencies]
# Build-time dependencies for generating bindings
bindgen = { version = "0.72.1", optional = true }
cc = { version = "1.2.41", optional = true }
xtask-build-helper = { path = "../../xtask-build-helper", version = "0.2.0-alpha.1" }

[dev-dependencies]
proptest.workspace = true

[package.metadata.docs.rs]
all-features = true
cargo-args = ["-Zunstable-options", "-Zrustdoc-scrape-examples"]
rustdoc-args = ["--cfg", "docsrs", "-Zunstable-options", "--generate-link-to-compiler-builtins"]
targets = ["x86_64-unknown-linux-gnu"]

[lib]
name = "bitnet_sys"
path = "src/lib.rs"
