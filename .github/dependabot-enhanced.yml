# Enhanced Dependabot Configuration (with grouping)
# To use: rename to dependabot.yml or merge changes into existing file
#
# Benefits of grouping:
# - Reduces PR noise (1 PR per group instead of N individual PRs)
# - Easier to review related dependency updates together
# - Lower CI cost (fewer workflow runs)

version: 2
updates:
  - package-ecosystem: cargo
    directory: /
    schedule:
      interval: weekly
    open-pull-requests-limit: 5
    labels:
      - automation
      - dependencies
    # Group related crates to reduce PR count
    groups:
      tokio-ecosystem:
        patterns:
          - "tokio*"
          - "bytes"
          - "hyper*"
          - "h2"
          - "mio"
      serde-ecosystem:
        patterns:
          - "serde*"
      test-dependencies:
        patterns:
          - "proptest*"
          - "criterion*"
          - "quickcheck*"
      # Optional: Add conventional commit prefixes
    commit-message:
      prefix: "deps"
      include: "scope"

  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
    open-pull-requests-limit: 5
    labels:
      - automation
      - dependencies
    # Group GitHub Actions updates
    groups:
      github-actions:
        patterns:
          - "actions/*"
          - "dtolnay/*"
          - "Swatinem/*"
          - "taiki-e/*"
    commit-message:
      prefix: "ci"
